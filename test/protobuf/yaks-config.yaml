config:
  namespace:
    temporary: false
  runtime:
    env:
      - name: YAKS_CAMELK_AUTO_REMOVE_RESOURCES
        value: false
      - name: YAKS_KUBERNETES_AUTO_REMOVE_RESOURCES
        value: false
      - name: YAKS_JBANG_CAMEL_DUMP_INTEGRATION_OUTPUT
        value: true
    settings:
      loggers:
        - name: INTEGRATION_STATUS
          level: INFO
        - name: INTEGRATION_LOGS
          level: INFO
    resources:
      - protobuf-serialize-pipe.yaml
      - protobuf-deserialize-pipe.yaml
      - protobuf-binary-source-pipe.yaml
      - protobuf-x-struct-sink-pipe.yaml
      - User.proto
  dump:
    enabled: true
    failedOnly: true
    includes:
      - app=camel-k
pre:
  - name: Install Kamelets
    run: |
      kubectl apply -f ../utils/webhook-source.kamelet.yaml -n $YAKS_NAMESPACE
